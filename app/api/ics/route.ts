import event from '@/content/event.json'; export async function GET(){ const start=new Date(event.date); const end=new Date(start.getTime()+4*60*60*1000); const toICS=(d:Date)=>d.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z'; const ics=['BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//Churrascao//pt-BR','BEGIN:VEVENT',`UID:${Date.now()}@churrascao.local`,`DTSTAMP:${toICS(new Date())}`,`DTSTART:${toICS(start)}`,`DTEND:${toICS(end)}`,`SUMMARY:${event.title}`,`LOCATION:${event.venue.name} - ${event.venue.address}`,'END:VEVENT','END:VCALENDAR'].join('\r\n'); return new Response(ics,{headers:{'Content-Type':'text/calendar; charset=utf-8','Content-Disposition':'attachment; filename=churrasco.ics'}}); }
